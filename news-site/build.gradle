
plugins {
	id 'application'
}

repositories {
	mavenCentral()
}

dependencies {
	implementation project(':jetstart')
	implementation 'com.j2html:j2html:1.5.0'
	implementation 'org.eclipse.jetty:jetty-server:11.0.7'
	implementation 'org.hsqldb:hsqldb:2.6.1'
}

import java.nio.file.Files

def properties = new Properties()

try(def file = Files.newBufferedReader(projectDir.toPath().resolve('project.properties'))) {
	properties.load(file)
}

processResources {
	from('src/main') {
		include 'css/**', 'image/**', 'xml/**'
	}

	doFirst {
		//System.out.println("echoooo")
		//def output = sourceSets.main.output.resourcesDir.toPath()
		//sourceSets.main.allSource
		//Files.copy()
	}
}

run {
	mainClass.set('net.ritzow.news.RunSite')
	mainModule.set('net.ritzow.news')

	standardInput = System.in

	jvmArgs '-Dnet.ritzow.certs=' + properties.getProperty('keystore.file'),
			'-Dnet.ritzow.pass=' + properties.getProperty('keystore.password'),
			'-Dnet.ritzow.debug=true'
}