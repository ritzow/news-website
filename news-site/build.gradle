import java.nio.file.Files

plugins {
	id 'java'
	id 'application'
}

repositories {
	mavenCentral()
}

dependencies {
	implementation project(':jetstart')
	implementation 'com.j2html:j2html:1.5.0'
	implementation 'org.eclipse.jetty:jetty-server:11.0.7'
}

processResources {
	//println(sourceSets.main.output.resourcesDir)
}

import java.nio.file.Files

run {
	mainClass.set('net.ritzow.news.RunSite')
	mainModule.set('net.ritzow.news')

	def properties = new Properties()

	try(def file = Files.newBufferedReader(projectDir.toPath().resolve('keystore.properties'))) {
		properties.load(file)
	}

	jvmArgs '-Dnet.ritzow.certs=' + properties.getProperty('keystore.file'),
			'-Dnet.ritzow.pass=' + properties.getProperty('keystore.password')
}